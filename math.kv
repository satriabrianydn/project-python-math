ScreenManager:
    LoadingScreen:
    MainScreen:
    SettingsScreen:
    MenuScreen:
    GameScreen:
    ResultScreen:

<LoadingScreen>:
    name: 'loading'
    Image:
        source: 'assets/gif/loading_2.gif'
        anim_delay: 0.1
        allow_stretch: True
        keep_ratio: False
        size_hint: None, None
        size: self.parent.size
        pos: self.parent.pos

<MainScreen>:
    name: 'main'
    Image:
        source: 'assets/gif/main_screen.gif'
        anim_delay: 0.1
        allow_stretch: True
        keep_ratio: False
        size_hint: None, None
        size: self.parent.size
        pos: self.parent.pos

    MDBoxLayout:
        orientation: 'vertical'
        padding: [40, 20]
        spacing: 20

        MDLabel:
            id: welcome_label
            text: ''
            halign: 'center'
            font_style: 'H4'
            font_name: 'fonts/kid-games.ttf'
            theme_text_color: 'Custom'
            text_color: 1, 1, 1, 1

        ImageButton:
            id: mulai_button
            source: 'assets/buttons/button_play.png'
            size_hint: (None, None)
            size: 300, 120
            pos_hint: {'center_x': 0.5}
            on_release: 
                app.sm.current = 'menu'
                app.play_click_sound()

        ImageButton:
            source: 'assets/buttons/button_settings.png'
            size_hint: (None, None)
            size: 300, 120
            pos_hint: {'center_x': 0.5}
            on_release: 
                app.sm.current = 'settings'
                app.play_click_sound()

<SettingsScreen>:
    name: 'settings'
    Image:
        source: 'assets/gif/settings.gif'
        anim_delay: 0.1
        allow_stretch: True
        keep_ratio: False
        size_hint: None, None
        size: self.parent.size
        pos: self.parent.pos

    FloatLayout:
        ImageButton:
            id: kembali_button
            source: 'assets/buttons/button_back.png'
            size_hint: (None, None)
            size: 80, 80
            pos_hint: {'x': 0.02, 'top': 0.98}
            on_release: 
                app.sm.current = 'main'
                app.play_click_sound()
            
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.5
            height: dp(48)  # Tinggi untuk baris ini
            padding: dp(10)  # Tambahkan padding dalam MDBoxLayout

            MDLabel:
                text: "NYALAKAN AUDIO"
                size_hint_x: 0.5  # Menentukan lebar label
                theme_text_color: 'Custom'
                text_color: 1, 1, 1, 1
                font_name: 'fonts/kid-games.ttf'
                halign: 'center'  # Vertikal center
                
            MDCheckbox:
                id: audio_checkbox
                active: True
                on_active: app.on_audio_switch(self, self.active)  # Memanggil fungsi saat aktif/tidak aktif
                size_hint_x: 0.3  # Menentukan lebar checkbox
                color: [1, 1, 1, 1]  # Warna kotak centang
                active_color: [1, 1, 1, 1]  # Warna tanda centang saat aktif
                disabled_color: [0.5, 0.5, 0.5, 1]  # Warna saat checkbox nonaktif

<MenuScreen>:
    name: 'menu'
    Image:
        source: 'assets/gif/class_choice.gif'
        anim_delay: 0.1
        allow_stretch: True
        keep_ratio: False
        size_hint: None, None
        size: self.parent.size
        pos: self.parent.pos

    FloatLayout:
        ImageButton:
            id: kembali_button
            source: 'assets/buttons/button_back.png'
            size_hint: (None, None)
            size: 80, 80
            pos_hint: {'x': 0.02, 'top': 0.98}
            on_release: 
                app.sm.current = 'main'
                app.play_click_sound()
            
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (None, None)
            size: 800, 200
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: 40

            ImageButton:
                source: 'assets/buttons/button_easy.png'
                size_hint: (None, None)
                size: 250, 100
                on_release: app.start_game(1)

            ImageButton:
                source: 'assets/buttons/button_medium.png'
                size_hint: (None, None)
                size: 250, 100
                on_release: app.start_game(2)

            ImageButton:
                source: 'assets/buttons/button_hard.png'
                size_hint: (None, None)
                size: 250, 100
                on_release: app.start_game(3)

<GameScreen>:
    name: 'game'
    Image:
        source: 'assets/gif/question_screen.gif'
        anim_delay: 0.1
        allow_stretch: True
        keep_ratio: False
        size_hint: None, None
        size: self.parent.size
        pos: self.parent.pos

    FloatLayout:
        MDBoxLayout:
            orientation: 'vertical'
            padding: [20, 40]  # Tambahkan padding atas dan bawah
            spacing: 40  # Spacing antar elemen di dalam MDBoxLayout
            size_hint: 1, 1
      
            MDLabel:
                id: question
                text: ''
                halign: 'center'
                font_style: 'H4'
                font_name: 'fonts/kid-games.ttf'
                color: 1, 1, 1, 1  # Warna teks pertanyaan
                size_hint_y: None
                height: dp(50)  # Tentukan tinggi teks agar lebih presisi

            # BoxLayout untuk menempatkan gambar di tengah
            FloatLayout:
                size_hint_y: None
                height: dp(100)  # Sesuaikan tinggi layout tombol
                pos_hint: {'center_x': 0.5, 'center_y': 0.3}  # Pusatkan secara horizontal dan vertikal

                GridLayout:
                    id: images_grid
                    cols: 5  # Jumlah kolom, sesuaikan sesuai kebutuhan
                    size_hint_y: None
                    height: dp(500)  # Sesuaikan tinggi sesuai kebutuhan
                    pos_hint: {'center_x': 0.5, 'center_y': 0.9}  # Center gambar horizontal
                    padding: [10, 10]  # Tambahkan sedikit padding jika dibutuhkan
                    spacing: 5  # Spacing antar gambar

                FloatLayout:
                    size_hint_y: None
                    height: dp(100)  # Sesuaikan tinggi layout tombol
                    pos_hint: {'center_x': 0.5, 'center_y': 0.01}  # Pusatkan secara horizontal dan vertikal
                    
                    MDRaisedButton:
                        id: answer_button_1
                        text: "1"
                        size_hint: (None, None)
                        size: 200, 100
                        font_size: '30sp'
                        font_name: 'fonts/kid-games.ttf'
                        pos_hint: {'center_x': 0.30, 'center_y': 0.5}  # Pusatkan tombol 1

                        on_release: app.check_button_answer(self)

                    MDRaisedButton:
                        id: answer_button_2
                        text: "2"
                        size_hint: (None, None)
                        size: 200, 100
                        font_size: '30sp'
                        font_name: 'fonts/kid-games.ttf'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Pusatkan tombol 2

                        on_release: app.check_button_answer(self)

                    MDRaisedButton:
                        id: answer_button_3
                        text: "3"
                        size_hint: (None, None)
                        size: 200, 100
                        font_size: '30sp'
                        font_name: 'fonts/kid-games.ttf'
                        pos_hint: {'center_x': 0.70, 'center_y': 0.5}  # Pusatkan tombol 3

                        on_release: app.check_button_answer(self)

            MDLabel:
                id: timer_label
                text: "TIME: 60"
                halign: 'center'
                font_style: 'H6'
                font_name: 'fonts/kid-games.ttf'
                color: 1, 1, 1, 1
                size_hint_y: None
                height: dp(30)

            MDLabel:
                id: feedback
                text: ''
                halign: 'center'
                font_style: 'Subtitle1'
                theme_text_color: 'Secondary'

        MDLabel:
            id: score_label
            text: "SCORE: 0"
            halign: 'right'
            font_style: 'H6'
            font_name: 'fonts/kid-games.ttf'
            color: 0, 0, 0, 1
            size_hint_y: None
            height: '30dp'
            pos_hint: {'right': 1, 'top': 1}

        ImageButton:
            id: kembali_button
            source: 'assets/buttons/button_back.png'
            size_hint: (None, None)
            size: 80, 80
            pos_hint: {'x': 0.02, 'top': 0.98}
            on_release: 
                app.sm.current = 'menu'
                app.play_click_sound()
                app.restart_game()

<ResultScreen>:
    name: 'result'
    canvas.before:
        Color:
            rgba: [1, 1, 1, 1]
        Rectangle:
            source: 'images/background.jpg'
            pos: self.pos
            size: self.size

    MDBoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20

        MDLabel:
            id: result_label
            text: ''
            halign: 'center'
            font_style: 'H4'
            font_name: 'fonts/kid-games.ttf'
            color: 1, 1, 1, 1

        MDBoxLayout:
            id: congrats_images
            orientation: 'horizontal'
            spacing: 15
            size_hint: (None, None)
            width: 350
            height: 150
            pos_hint: {'center_x': 0.5}
            opacity: 0

            ImageButton:
                source: 'images/star.png'
                size_hint: (None, None)
                size: 100, 100
                disabled: True

            ImageButton:
                source: 'images/star.png'
                size_hint: (None, None)
                size: 100, 100
                disabled: True

            ImageButton:
                source: 'images/star.png'
                size_hint: (None, None)
                size: 100, 100
                disabled: True

        ImageButton:
            id: kembali_button
            source: 'assets/buttons/button_restart.png'
            size_hint: (None, None)
            size: 250, 100
            pos_hint: {'center_x': 0.5}
            on_release: app.restart_game()